import com.github.kittinunf.fuel.httpPost
import com.squareup.moshi.Moshi

const val POST = "http://127.0.0.1:5000/load"

fun main(args: Array<String>) {
    val activity = Activity("First Test Run", 12_000, 250_000)
    val wheelList = listOf("colson", "magic")
    val directionList = listOf("forward", "reverse", "left", "right")

    // milliseconds, profile_acceleration, profile_velocity, profile_position, actual_position
    activity.data.add(listOf(1, 0, 0, 0, 0))
    activity.data.add(listOf(2, 24, 2400, 120000, 0))
    activity.data.add(listOf(3, 120, 7200, 240000, 0))
    activity.data.add(listOf(4, 336, 14400, 360000, 0))
    activity.data.add(listOf(5, 720, 24000, 480000, 0))
    activity.data.add(listOf(6, 1320, 36000, 600000, 39))
    activity.data.add(listOf(7, 2160, 48000, 600000, 150))
    activity.data.add(listOf(8, 3240, 60000, 600000, 257))
    activity.data.add(listOf(9, 4560, 72000, 600000, 556))
    activity.data.add(listOf(10, 6120, 84000, 600000, 829))
    activity.data.add(listOf(11, 7920, 96000, 600000, 1333))
    activity.data.add(listOf(12, 9936, 105600, 480000, 2050))
    activity.data.add(listOf(13, 12120, 112800, 360000, 2967))
    activity.data.add(listOf(14, 14424, 117600, 240000, 4037))
    activity.data.add(listOf(15, 16800, 120000, 120000, 5275))
    activity.data.add(listOf(16, 19200, 120000, 0, 6748))
    activity.data.add(listOf(17, 21600, 120000, 0, 8377))
    activity.data.add(listOf(18, 24000, 120000, 0, 9721))
    activity.data.add(listOf(19, 26400, 120000, 0, 11672))
    activity.data.add(listOf(20, 28800, 120000, 0, 13116))
    activity.data.add(listOf(21, 31200, 120000, 0, 14596))
    activity.data.add(listOf(22, 33600, 120000, 0, 16614))
    activity.data.add(listOf(23, 36000, 120000, 0, 18700))
    activity.data.add(listOf(24, 38400, 120000, 0, 20786))
    activity.data.add(listOf(25, 40800, 120000, 0, 22953))
    activity.data.add(listOf(26, 43200, 120000, 0, 25213))
    activity.data.add(listOf(27, 45600, 120000, 0, 28069))
    activity.data.add(listOf(28, 48000, 120000, 0, 30338))
    activity.data.add(listOf(29, 50400, 120000, 0, 32679))
    activity.data.add(listOf(30, 52800, 120000, 0, 35088))
    activity.data.add(listOf(31, 55200, 120000, 0, 36871))
    activity.data.add(listOf(32, 57600, 120000, 0, 39896))
    activity.data.add(listOf(33, 60000, 120000, 0, 42316))
    activity.data.add(listOf(34, 62400, 120000, 0, 44847))
    activity.data.add(listOf(35, 64800, 120000, 0, 47345))
    activity.data.add(listOf(36, 67200, 120000, 0, 49713))
    activity.data.add(listOf(37, 69600, 120000, 0, 52264))
    activity.data.add(listOf(38, 72000, 120000, 0, 54756))
    activity.data.add(listOf(39, 74400, 120000, 0, 57409))
    activity.data.add(listOf(40, 76800, 120000, 0, 59874))
    activity.data.add(listOf(41, 79200, 120000, 0, 62325))
    activity.data.add(listOf(42, 81600, 120000, 0, 64865))
    activity.data.add(listOf(43, 84000, 120000, 0, 67350))
    activity.data.add(listOf(44, 86400, 120000, 0, 69167))
    activity.data.add(listOf(45, 88800, 120000, 0, 72238))
    activity.data.add(listOf(46, 91200, 120000, 0, 74695))
    activity.data.add(listOf(47, 93600, 120000, 0, 77076))
    activity.data.add(listOf(48, 96000, 120000, 0, 79457))
    activity.data.add(listOf(49, 98400, 120000, 0, 81853))
    activity.data.add(listOf(50, 100800, 120000, 0, 84184))
    activity.data.add(listOf(51, 103200, 120000, 0, 86594))
    activity.data.add(listOf(52, 105600, 120000, 0, 88947))
    activity.data.add(listOf(53, 108000, 120000, 0, 91335))
    activity.data.add(listOf(54, 110400, 120000, 0, 93727))
    activity.data.add(listOf(55, 112800, 120000, 0, 96097))
    activity.data.add(listOf(56, 115200, 120000, 0, 98480))
    activity.data.add(listOf(57, 117600, 120000, 0, 100909))
    activity.data.add(listOf(58, 120000, 120000, 0, 103276))
    activity.data.add(listOf(59, 122400, 120000, 0, 105695))
    activity.data.add(listOf(60, 124800, 120000, 0, 108152))
    activity.data.add(listOf(61, 127200, 120000, 0, 110570))
    activity.data.add(listOf(62, 129600, 120000, 0, 113050))
    activity.data.add(listOf(63, 132000, 120000, 0, 115464))
    activity.data.add(listOf(64, 134400, 120000, 0, 117943))
    activity.data.add(listOf(65, 136800, 120000, 0, 120392))
    activity.data.add(listOf(66, 139200, 120000, 0, 122842))
    activity.data.add(listOf(67, 141600, 120000, 0, 125292))
    activity.data.add(listOf(68, 144000, 120000, 0, 127718))
    activity.data.add(listOf(69, 146400, 120000, 0, 130130))
    activity.data.add(listOf(70, 148800, 120000, 0, 132453))
    activity.data.add(listOf(71, 151200, 120000, 0, 134858))
    activity.data.add(listOf(72, 153600, 120000, 0, 137218))
    activity.data.add(listOf(73, 156000, 120000, 0, 139546))
    activity.data.add(listOf(74, 158400, 120000, 0, 141926))
    activity.data.add(listOf(75, 160800, 120000, 0, 144311))
    activity.data.add(listOf(76, 163200, 120000, 0, 146711))
    activity.data.add(listOf(77, 165600, 120000, 0, 149117))
    activity.data.add(listOf(78, 168000, 120000, 0, 151569))
    activity.data.add(listOf(79, 170400, 120000, 0, 153986))
    activity.data.add(listOf(80, 172800, 120000, 0, 156395))
    activity.data.add(listOf(81, 175200, 120000, 0, 158820))
    activity.data.add(listOf(82, 177600, 120000, 0, 161187))
    activity.data.add(listOf(83, 180000, 120000, 0, 163577))
    activity.data.add(listOf(84, 182400, 120000, 0, 166026))
    activity.data.add(listOf(85, 184800, 120000, 0, 168381))
    activity.data.add(listOf(86, 187200, 120000, 0, 170778))
    activity.data.add(listOf(87, 189600, 120000, 0, 173180))
    activity.data.add(listOf(88, 192000, 120000, 0, 175567))
    activity.data.add(listOf(89, 194400, 120000, 0, 177942))
    activity.data.add(listOf(90, 196800, 120000, 0, 180322))
    activity.data.add(listOf(91, 199200, 120000, 0, 182668))
    activity.data.add(listOf(92, 201600, 120000, 0, 185023))
    activity.data.add(listOf(93, 204000, 120000, 0, 187403))
    activity.data.add(listOf(94, 206400, 120000, 0, 189752))
    activity.data.add(listOf(95, 208800, 120000, 0, 192110))
    activity.data.add(listOf(96, 211200, 120000, 0, 194490))
    activity.data.add(listOf(97, 213600, 120000, 0, 196922))
    activity.data.add(listOf(98, 216000, 120000, 0, 199347))
    activity.data.add(listOf(99, 218400, 120000, 0, 201795))
    activity.data.add(listOf(100, 220800, 120000, 0, 204233))
    activity.data.add(listOf(101, 223200, 120000, 0, 206666))
    activity.data.add(listOf(102, 225600, 120000, 0, 209124))
    activity.data.add(listOf(103, 228000, 120000, 0, 211545))
    activity.data.add(listOf(104, 230400, 120000, 0, 213962))
    activity.data.add(listOf(105, 232800, 120000, 0, 216389))
    activity.data.add(listOf(106, 235200, 120000, 0, 218794))
    activity.data.add(listOf(107, 237576, 117600, -120000, 221188))
    activity.data.add(listOf(108, 239880, 112800, -240000, 223561))
    activity.data.add(listOf(109, 242064, 105600, -360000, 225919))
    activity.data.add(listOf(110, 244080, 96000, -480000, 228258))
    activity.data.add(listOf(111, 245880, 84000, -600000, 230442))
    activity.data.add(listOf(112, 247440, 72000, -600000, 232560))
    activity.data.add(listOf(113, 248760, 60000, -600000, 234556))
    activity.data.add(listOf(114, 249840, 48000, -600000, 236464))
    activity.data.add(listOf(115, 250680, 36000, -600000, 238235))
    activity.data.add(listOf(116, 251280, 24000, -600000, 239774))
    activity.data.add(listOf(117, 251664, 14400, -480000, 241222))
    activity.data.add(listOf(118, 251880, 7200, -360000, 242447))
    activity.data.add(listOf(119, 251976, 2400, -240000, 243545))
    activity.data.add(listOf(120, 252000, 0, -120000, 244480))

    activity.meta["direction"] = directionList.shuffled().first()
    activity.meta["wheel"] = wheelList.shuffled().first()

    activity.actualDistance = 244480

    val moshi = Moshi.Builder().build()
    val adapter = ActivityJsonAdapter(moshi)

    val (_, _, result) = POST.httpPost()
        .header("content-type" to "application/json")
        .body(adapter.toJson(activity))
        .responseString()

    println(result.get())
}